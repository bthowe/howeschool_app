{% extends "base_template.html" %}
{% import "bootstrap/wtf.html" as wtf %}

{% block styles %}
    {{super()}}
{% endblock styles %}


{% block body %}
    {% block navbar %}
        {{super()}}
    {% endblock navbar %}
    {% block content1 %}
        {{super()}}
    {% endblock content1 %}
    {% block main %}

        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <form method="POST" action="weekly_forms_create">
                <div class="row">
                    <div class="col-3">
                        {{ wtf.form_field(form.weekof) }}
                    </div>
                </div>
                <div class="form-row">
                    <h1>Scripture</h1>
                    <table class="table table-sm">
                        <thead class="thead-light">
                        <tr class="d-flex">
                            <th class="col-2"></th>
                            <th class="col-5"></th>
                        </thead>
                        <tbody>
                        <tr class="d-flex">
                                <th class="col-2">Reference</th>
                                <td class="col-5">{{ form.scripture_ref(class_="col-12") }}</td>
                        </tr>
                        <tr class="d-flex">
                                <th class="col-2">Text</th>
                                <td class="col-5">{{ form.scripture(cols="46", rows="10") }}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <div class="form-row">
                    <h1>Job</h1>
                    <table class="table table-sm">
                        <thead class="thead-light">
                        <tr class="d-flex">
                            <th class="col-2">Day of Week</th>
                            <th class="col-5">Job</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.mon_job.label }}</th>
                            <td class="col-5">{{ form.mon_job(class_="col-12") }}</td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.tue_job.label }}</th>
                            <td class="col-5">{{ form.tue_job(class_="col-12") }}</td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.wed_job.label }}</th>
                            <td class="col-5">{{ form.wed_job(class_="col-12") }}</td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.thu_job.label }}</th>
                            <td class="col-5">{{ form.thu_job(class_="col-12") }}</td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.fri_job.label }}</th>
                            <td class="col-5">{{ form.fri_job(class_="col-12") }}</td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.sat_job.label }}</th>
                            <td class="col-5">{{ form.sat_job(class_="col-12") }}</td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="form-row">
                    <h1>Discussion</h1>
                    <table class="table table-sm">
                        <thead class="thead-light">
                        <tr class="d-flex">
                            <th class="col-2">Day of Week</th>
                            <th class="col-5">Discussion Question</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.mon_dis.label }}</th>
                            <td class="col-5">{{ form.mon_dis(class_="col-12") }} </td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.tue_dis.label }}</th>
                            <td class="col-5">{{ form.tue_dis(class_="col-12") }} </td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.wed_dis.label }}</th>
                            <td class="col-5">{{ form.wed_dis(class_="col-12") }} </td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.thu_dis.label }}</th>
                            <td class="col-5">{{ form.thu_dis(class_="col-12") }} </td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.fri_dis.label }}</th>
                            <td class="col-5">{{ form.fri_dis(class_="col-12") }} </td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.sat_dis.label }}</th>
                            <td class="col-5">{{ form.sat_dis(class_="col-12") }} </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <div class="form-row">
                    <h1>Book</h1>
                    <table class="table table-sm">
                        <thead class="thead-light">
                        <tr class="d-flex">
                            <th class="col-2">Kid</th>
                            <th class="col-2">Book</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.cal_book.label }}</th>
                            <td class="col-5">{{ form.cal_book(class_="col-12") }} </td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.sam_book.label }}</th>
                            <td class="col-5">{{ form.sam_book(class_="col-12") }} </td>
                        </tr>
                        <tr class="d-flex">
                            <th class="col-2">{{ form.kay_book.label }}</th>
                            <td class="col-5">{{ form.kay_book(class_="col-12") }} </td>
                        </tr>
                        </tbody>
                    </table>
                </div>
                <input class="btn btn-primary" id="submit" type="submit"/>
            </form>
        </div>

    {% endblock main %}
    {% block content2 %}
        {{ super() }}
    {% endblock content2 %}
    {% block scripts %}
        {{ super() }}

        <script>
            document.getElementById('date').focus();

            date = {{ date | tojson }}
                formData = {{ form_data | tojson }}

                    day_lst = ['mon', 'tue', 'wed', 'thu', 'fri', 'sat'];
            kid_lst = ['calvin', 'samuel', 'kay'];

            document.getElementById('date').value = date;

            for (i = 0; i < day_lst.length; ++i) {
                document.getElementById(day_lst[i] + '_job').value = formData[day_lst[i] + '_job'];
                document.getElementById(day_lst[i] + '_question').value = formData[day_lst[i] + '_question'];
                for (j = 0; j < kid_lst.length; ++j) {
                    document.getElementById(kid_lst[j] + '_book').value = formData[kid_lst[j] + '_book'];
                }
            }


            function createData() {
                data_send = {}
                for (i = 0; i < day_lst.length; ++i) {
                    data_send[day_lst[i] + '_job'] = document.getElementById(day_lst[i] + '_job').value
                    data_send[day_lst[i] + '_question'] = document.getElementById(day_lst[i] + '_question').value
                }
                for (i = 0; i < kid_lst.length; ++i) {
                    data_send[kid_lst[i] + '_book'] = document.getElementById(kid_lst[i] + '_book').value;
                }
                data_send['week_start_date'] = document.getElementById('date').value;
                return data_send
            }


{#            document.addEventListener('DOMContentLoaded', init, false);#}
{#            function init() {#}
{#                function submit() {#}
{#                    var request = new XMLHttpRequest();#}
{#                    request.open("POST", "/mongo_call_forms", true);#}
{#                    request.send(JSON.stringify(createData()));#}
{#                }#}
{#                var button_submit = document.getElementById('submit');#}
{#                button_submit.addEventListener('click', submit, true);#}
{#            }#}


        </script>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
                integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
                crossorigin="anonymous"></script>
{#        <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>#}
    {% endblock scripts %}

{% endblock body %}
